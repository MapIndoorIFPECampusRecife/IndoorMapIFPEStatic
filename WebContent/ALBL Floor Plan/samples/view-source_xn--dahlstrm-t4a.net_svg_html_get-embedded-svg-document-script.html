
<!-- saved from url=(0074)http://xn--dahlstrm-t4a.net/svg/html/get-embedded-svg-document-script.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1252"></head><body><div class="line-gutter-backdrop"></div><table><tbody><tr><td class="line-number" value="1"></td><td class="line-content"><span class="html-doctype">&lt;!DOCTYPE html&gt;</span></td></tr><tr><td class="line-number" value="2"></td><td class="line-content"><span class="html-tag">&lt;html&gt;</span></td></tr><tr><td class="line-number" value="3"></td><td class="line-content">	<span class="html-tag">&lt;head&gt;</span></td></tr><tr><td class="line-number" value="4"></td><td class="line-content">		<span class="html-tag">&lt;title&gt;</span>This shows how to get elements inside included svg images from the surrounding html.<span class="html-tag">&lt;/title&gt;</span></td></tr><tr><td class="line-number" value="5"></td><td class="line-content">	<span class="html-tag">&lt;/head&gt;</span></td></tr><tr><td class="line-number" value="6"></td><td class="line-content">	<span class="html-tag">&lt;body&gt;</span></td></tr><tr><td class="line-number" value="7"></td><td class="line-content">		<span class="html-tag">&lt;object <span class="html-attribute-name">class</span>="<span class="html-attribute-value">emb</span>" <span class="html-attribute-name">data</span>="<span class="html-attribute-value">images/svglogo.svg</span>" <span class="html-attribute-name">width</span>="<span class="html-attribute-value">100</span>" <span class="html-attribute-name">height</span>="<span class="html-attribute-value">100</span>" <span class="html-attribute-name">type</span>="<span class="html-attribute-value">image/svg+xml</span>"&gt;</span><span class="html-tag">&lt;/object&gt;</span></td></tr><tr><td class="line-number" value="8"></td><td class="line-content">		<span class="html-tag">&lt;embed <span class="html-attribute-name">class</span>="<span class="html-attribute-value">emb</span>" <span class="html-attribute-name">src</span>="<a class="html-attribute-value html-resource-link" target="_blank" href="http://xn--dahlstrm-t4a.net/svg/html/images/svglogo.svg">images/svglogo.svg</a>" <span class="html-attribute-name">width</span>="<span class="html-attribute-value">100</span>" <span class="html-attribute-name">height</span>="<span class="html-attribute-value">100</span>" <span class="html-attribute-name">type</span>="<span class="html-attribute-value">image/svg+xml</span>" /&gt;</span></td></tr><tr><td class="line-number" value="9"></td><td class="line-content">		<span class="html-tag">&lt;iframe <span class="html-attribute-name">class</span>="<span class="html-attribute-value">emb</span>" <span class="html-attribute-name">src</span>="<a class="html-attribute-value html-resource-link" target="_blank" href="http://xn--dahlstrm-t4a.net/svg/html/images/svglogo.svg">images/svglogo.svg</a>" <span class="html-attribute-name">width</span>="<span class="html-attribute-value">100</span>" <span class="html-attribute-name">height</span>="<span class="html-attribute-value">100</span>" <span class="html-attribute-name">style</span>="<span class="html-attribute-value">border:0</span>" &gt;</span><span class="html-tag">&lt;/iframe&gt;</span></td></tr><tr><td class="line-number" value="10"></td><td class="line-content">		<span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="11"></td><td class="line-content">			You should see three svg logo images with green fill above here.</td></tr><tr><td class="line-number" value="12"></td><td class="line-content">		<span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="13"></td><td class="line-content">		<span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="14"></td><td class="line-content">			If any of the logos are shown in orange that means the browser failed to access the DOM of the referenced svg resource.</td></tr><tr><td class="line-number" value="15"></td><td class="line-content">			From left to right we have &amp;lt;object&amp;gt;, &amp;lt;embed&amp;gt; and &amp;lt;iframe&amp;gt; that all reference the <span class="html-tag">&lt;a <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="http://xn--dahlstrm-t4a.net/svg/html/images/svglogo.svg">images/svglogo.svg</a>"&gt;</span>same svg file<span class="html-tag">&lt;/a&gt;</span>.</td></tr><tr><td class="line-number" value="16"></td><td class="line-content">			The script gets the referenced svg document either with <span class="html-tag">&lt;code&gt;</span>contentDocument<span class="html-tag">&lt;/code&gt;</span> or <span class="html-tag">&lt;code&gt;</span>getSVGDocument()<span class="html-tag">&lt;/code&gt;</span> and then sets the fill color</td></tr><tr><td class="line-number" value="17"></td><td class="line-content">			to lime green.</td></tr><tr><td class="line-number" value="18"></td><td class="line-content">		<span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="19"></td><td class="line-content">		<span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="20"></td><td class="line-content">			View source to see how this works.</td></tr><tr><td class="line-number" value="21"></td><td class="line-content">		<span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="22"></td><td class="line-content">		<span class="html-tag">&lt;script&gt;</span>//&lt;![CDATA[</td></tr><tr><td class="line-number" value="23"></td><td class="line-content">		</td></tr><tr><td class="line-number" value="24"></td><td class="line-content">		// wait until all the resources are loaded</td></tr><tr><td class="line-number" value="25"></td><td class="line-content">		window.addEventListener("load", findSVGElements, false);</td></tr><tr><td class="line-number" value="26"></td><td class="line-content">		</td></tr><tr><td class="line-number" value="27"></td><td class="line-content">		// fetches the document for the given embedding_element</td></tr><tr><td class="line-number" value="28"></td><td class="line-content">		function getSubDocument(embedding_element)</td></tr><tr><td class="line-number" value="29"></td><td class="line-content">		{</td></tr><tr><td class="line-number" value="30"></td><td class="line-content">			if (embedding_element.contentDocument) </td></tr><tr><td class="line-number" value="31"></td><td class="line-content">			{</td></tr><tr><td class="line-number" value="32"></td><td class="line-content">				return embedding_element.contentDocument;</td></tr><tr><td class="line-number" value="33"></td><td class="line-content">			} </td></tr><tr><td class="line-number" value="34"></td><td class="line-content">			else </td></tr><tr><td class="line-number" value="35"></td><td class="line-content">			{</td></tr><tr><td class="line-number" value="36"></td><td class="line-content">				var subdoc = null;</td></tr><tr><td class="line-number" value="37"></td><td class="line-content">				try {</td></tr><tr><td class="line-number" value="38"></td><td class="line-content">					subdoc = embedding_element.getSVGDocument();</td></tr><tr><td class="line-number" value="39"></td><td class="line-content">				} catch(e) {}</td></tr><tr><td class="line-number" value="40"></td><td class="line-content">				return subdoc;</td></tr><tr><td class="line-number" value="41"></td><td class="line-content">			}</td></tr><tr><td class="line-number" value="42"></td><td class="line-content">		}</td></tr><tr><td class="line-number" value="43"></td><td class="line-content">				</td></tr><tr><td class="line-number" value="44"></td><td class="line-content">		function findSVGElements()</td></tr><tr><td class="line-number" value="45"></td><td class="line-content">		{</td></tr><tr><td class="line-number" value="46"></td><td class="line-content">			var elms = document.querySelectorAll(".emb");</td></tr><tr><td class="line-number" value="47"></td><td class="line-content">			for (var i = 0; i &lt; elms.length; i++)</td></tr><tr><td class="line-number" value="48"></td><td class="line-content">			{</td></tr><tr><td class="line-number" value="49"></td><td class="line-content">				var subdoc = getSubDocument(elms[i])</td></tr><tr><td class="line-number" value="50"></td><td class="line-content">				if (subdoc)</td></tr><tr><td class="line-number" value="51"></td><td class="line-content">					subdoc.getElementById("svgbar").setAttribute("fill", "lime");</td></tr><tr><td class="line-number" value="52"></td><td class="line-content">			}</td></tr><tr><td class="line-number" value="53"></td><td class="line-content">		}</td></tr><tr><td class="line-number" value="54"></td><td class="line-content">		//]]&gt;</td></tr><tr><td class="line-number" value="55"></td><td class="line-content">		<span class="html-tag">&lt;/script&gt;</span></td></tr><tr><td class="line-number" value="56"></td><td class="line-content">	<span class="html-tag">&lt;/body&gt;</span></td></tr><tr><td class="line-number" value="57"></td><td class="line-content"><span class="html-tag">&lt;/html&gt;</span></td></tr><tr><td class="line-number" value="58"></td><td class="line-content"><span class="html-end-of-file"></span></td></tr></tbody></table></body></html>